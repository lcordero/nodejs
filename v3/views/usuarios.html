<div>
<style>
.datos {
    width: 100%;
    padding: 50px;
}
.delete {
    width: 80px;
    height: 20px;
    color: rgb(3, 10, 107);
}
.edit {
    width: 80px;
    height: 20px;
    color: green;
}
th, td {
    background: rgb(236, 234, 108);
}
</style>

<table class="datos">
    <thead class="header">
        <tr>
        <th>Customer Name</th>
        <th>Anddress</th>
        <th>Phone</th>
        <th>Action</th>            
        </tr>
    </thead>
    <tbody class="contenido">
        
    </tbody>
</table>
</div>

<script src="/assets/jquery.js"></script>
<script src="/assets/socket.io.js"></script>
<script>
    var contenido = $(".contenido")
    var agrega = $(".agregar")
    var inputes = $(':input')
    var borrar = $('.borra')
    // var editar = $('.edit')

    var socket = io.connect(window.location.host);
    socket.on('conecte', function() {
        console.log('conecte');
        socket.send('conecte')
    });

    // socket.on('new_user', function(usuarios) {
    //     if (!usuarios.customername || !usuarios.anddress || !usuarios.phone) return
    //     contenido.append(`
    //         <tr>
    //         <th>`+ usuarios.customername +`</th>
    //         <th>`+ usuarios.anddress +`</th>
    //         <th>`+ usuarios.phone +`</th>
    //         </tr>
    //     `)
    // });

    socket.on('disconnect', function(){
        console.log('Desconectado');
    });

    $( ".borra" ).click(function() {
    $( "th" ).remove( "contenido" );
    })
    borrar.on("click", function(){
        console.log("click")
        socket.emit('borrar_user', {
            'customername': $(".customername").remove(), 
            'anddress': $(".anddress").remove(),
            'phone': $(".phone").remove()
        });
        inputes.val('');
    })

    var t_contenido = function(url){
        $.get( url, function( data ) {
            contenido.empty()
            $.each( data.usuarios, function( i, usuarios ) {
                contenido.append(`
                    <tr>
                    <th>`+ usuarios.customername +`</th>
                    <th>`+ usuarios.anddress +`</th>
                    <th>`+ usuarios.phone +`</th>
                    <td><button class="edit">Editar</button><button class="borra">Eliminar</button></td>
                    </tr>
                `)
            })
        })
    }

    t_contenido('http://'+ window.location.host +'/api/usuarios')
</script>