<div>
<style>
.datos {
    width: 100%;
    padding: 50px;
}
</style>
<input class="name" placeholder="customername" />
<input class="anddress" placeholder="anddress" />
<input class="phone" placeholder="phone" />
<button class="agregar">Agregar</button>
<table class="datos">
    <thead class="header">
        <tr>
        <th>Customer Name</th>
        <th>Anddress</th>
        <th>Phone</th>
        <th>Action</th>            
        </tr>
    </thead>
    <tbody class="contenido">
        
    </tbody>
</table>
</div>

<script src="/assets/jquery.js"></script>
<script src="/assets/socket.io.js"></script>
<script>
    var contenido = $(".contenido")
    var agrega = $(".agregar")
    var inputes = $(':input')

    var socket = io.connect(window.location.host);
    socket.on('conecte', function() {
        console.log('conecte');
        socket.send('conecte')
    });

    socket.on('new_user', function(usuarios) {
        if (!usuarios.customername || !usuarios.anddress || !usuarios.phone) return
        contenido.append(`
            <tr>
            <th>`+ usuarios.customername +`</th>
            <th>`+ usuarios.anddress +`</th>
            <th>`+ usuarios.phone +`</th>
            </tr>
        `)
    });

    socket.on('disconnect', function(){
        console.log('Desconectado');
    });

    agrega.on("click", function(){
        console.log("click")
        socket.emit('new_user', {
            'customername': $(".name").val(), 
            'anddress': $(".anddress").val(),
            'phone': $(".phone").val()
        });
        inputes.val('');
    })

    var t_contenido = function(url){
        $.get( url, function( data ) {
            contenido.empty()
            $.each( data.usuarios, function( i, usuarios ) {
                contenido.append(`
                    <tr>
                    <th>`+ usuarios.customername +`</th>
                    <th>`+ usuarios.anddress +`</th>
                    <th>`+ usuarios.phone +`</th>
                    </tr>
                `)
            })
        })
    }

    t_contenido('http://'+ window.location.host +'/api/usuarios')
</script>